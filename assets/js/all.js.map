{"version":3,"sources":["all.js"],"names":["apiUrl","loginInput","document","querySelectorAll","loginEmail","querySelector","loginPassword","login_btn","login_alert_txt","login_status_txt","callModal","showModal","bootstrap","Modal","signUpInput","signUpEmail","signUpNickname","signUpPassword","signUpPassword2","signUpBtn","signup_alert_txt","signup_status_txt","addEventListener","login_check_ok","loginCheck","input","value","login","textContent","axios","post","mail","pwd","res","defaults","headers","common","authorization","sessionStorage","setItem","data","nickname","setTimeout","innerHTML","loginReset","location","href","isnull","item","match","signupReset","format_isOk","signupCheck","signup","then","error","console","log","response","trim","length"],"mappings":"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","file":"all.js","sourcesContent":["\nconst apiUrl = 'https://todoo.5xcamp.us';\n//login-------------------------------------\nconst loginInput = document.querySelectorAll('.login-input');\nconst loginEmail = document.querySelector('#login-email');\nconst loginPassword = document.querySelector('#login-password');\nconst login_btn = document.querySelector('.login_btn');\nconst login_alert_txt = document.querySelector('.login_alert_txt');\nconst login_status_txt = document.querySelector('.login_status_txt');\nconst callModal = document.querySelector('#show_modal');\nconst showModal = new bootstrap.Modal(callModal, {})\n//signup---------------------------------------\nconst signUpInput = document.querySelector('.signUpInput')\nconst signUpEmail = document.querySelector('#signUpEmail');\nconst signUpNickname = document.querySelector('#signUpNickname');\nconst signUpPassword = document.querySelector('#signUpPassword');\nconst signUpPassword2 = document.querySelector('#signUpPassword2');\nconst signUpBtn = document.querySelector('.signup_btn');\nconst signup_alert_txt = document.querySelector('.signup_alert_txt');\nconst signup_status_txt = document.querySelector('.signup_status_txt');\n\n//將modal的動元素名稱設為一樣 \n//const signup_modal = document.querySelector('.signup_modal');\n//const signup_myModal = new bootstrap.Modal(signup_modal, {})\n\n//login 設定------------------------------\nlogin_btn.addEventListener('click', () => {\n  const login_check_ok = loginCheck();\n  if(login_check_ok === true) {\n    input(loginEmail.value, loginPassword.value)\n  }else{\n    return;\n  }\n})\n\nfunction login(loginEmail, loginPassword) {\n  login_status_txt.textContent = '登入中請稍後 ...';\n  return axios.post(`${apiUrl}/users/sign_in`,\n    {\n      \"user\":{\n        \"email\": loginEmail,\n        \"password\": loginPassword\n      }\n    }\n  )\n}\n\nconst input = async(mail, pwd) => {\n  try{\n    const res = await login(mail, pwd);\n    //設置默認標頭的機制語法，該標頭將隨您發出的每個請求一起發送\n    axios.defaults.headers.common['Authorization'] = res.headers.authorization\n    sessionStorage.setItem('token', res.headers.authorization)\n    sessionStorage.setItem('name', res.data.nickname)\n    setTimeout(() =>{\n      login_status_txt.textContent = '';\n      login_alert_txt.innerHTML = `登入成功 ! 歡迎${res.data.nickname} 回來 <br><br> 即將跳轉待辦清單...`;\n      //showModal.show();\n      loginReset();\n      setTimeout(() =>{\n        document.location.href='./addTodos.html';\n      }, 2000);\n    }, 1000);\n\n  }catch(error){\n    setTimeout(() =>{\n      login_status_txt.textContent = '';\n      login_alert_txt.textContent = '登入失敗，您的Email或密碼有誤!'\n      //showModal.show()\n      loginReset();\n    }, 1000);\n  }\n}\n\nfunction loginCheck(){\n  let isnull = false;\n  for(const item of loginInput){\n    if(item.value === ''){\n      isnull = true;\n      break;\n    }\n  }\n  if (isnull === true){\n    login_alert_txt.textContent = '您還有欄位尚未填寫喔!!';\n    //showModal.show();\n    loginReset();\n    return;\n  }\n  //email的輸入值字串必須有 @\n  if(loginEmail.value.match('@') === null){\n    login_alert_txt.textContent = '您的Email格式不正確!!!';\n    //showModal.show();\n    loginReset();\n    return;\n  }\n  return true;\n}\n\nfunction loginReset(){\n  loginEmail.value = '';\n  loginPassword.value = '';\n}\n\n\n//signup 設定------------------------------\n\nsignupReset();\n\nsignUpBtn.addEventListener('click', () => {\n  const format_isOk = signupCheck();\n  if (format_isOk === true) {\n    signup(signUpEmail, signUpNickname, signUpPassword)\n  } else {\n    return;\n  }\n})\n\nfunction signup(signUpEmail, signUpNickname, signUpPassword) {\n  signup_status_txt.textContent = '註冊中請稍後 ... ';\n  axios.post(`${apiUrl}/users`, \n  {\n    \"user\": {\n      \"email\": signUpEmail.value,\n      \"nickname\": signUpNickname.value,\n      \"password\": signUpPassword.value\n    }\n  })\n    .then(res => {\n      setTimeout(() => {\n        signup_alert_txt.innerHTML = `註冊成功 ! 歡迎${res.data.nickname}光臨本網站 <br><br> 頁面即將在3秒後跳轉至登入畫面 ...`;\n        //showModal.show();\n        signupReset();\n        setTimeout(() => {\n          document.location.href = './index.html'\n        }, 2000)\n      }, 1000)\n    })\n    .catch(error => {\n      console.log(error.response);\n      setTimeout(() => {\n        signup_alert_txt.innerHTML = `很抱歉 ! 您的${error.response.data.error[0]} 請重新註冊`;\n        //showModal.show();\n        signup_status_txt.textContent = '';\n        signupReset();\n      }, 1000);\n    })\n}\n\nfunction signupCheck() {\n  let isnull = false;\n\n  for (const item of signUpInput) {\n    if (item.value == '') {\n      isnull = true;\n      break;\n    }\n  }\n  if (isnull === true) {\n    signup_alert_txt.textContent = '您還有欄位尚未填寫';\n    //showModal.show();\n    return;\n  }\n  if (signUpEmail.value.match('@') === null) {\n    signup_alert_txt.textContent = 'Email 格式不正確';\n    //showModal.show();\n    signupReset();\n    return;\n  }\n  if (signUpPassword.value.trim().length < 6) {\n    signup_alert_txt.textContent = '密碼必須6個字以上喔 ! ';\n    //showModal.show();\n    signUpPassword.value = '';\n    signUpPassword2.value = '';\n    return;\n  }\n  if (signUpPassword.value !== signUpPassword2.value) {\n    signup_alert_txt.textContent = '兩次的密碼輸入不一致喔 ! ';\n    //showModal.show();\n    signUpPassword.value = '';\n    signUpPassword2.value = '';\n    return;\n  }\n  return true;\n}\n\nfunction signupReset() {\n  signUpEmail.value = '';\n  signUpNickname.value = '';\n  signUpPassword.value = '';\n  signUpPassword2.value = '';\n}"]}