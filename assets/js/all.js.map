{"version":3,"sources":["all.js","signup.js"],"names":["apiUrl","allinput","document","querySelectorAll","email","querySelector","password","login_btn","alert_txt","status_txt","modal","loginModal","bootstrap","Modal","addEventListener","check_ok","check","input","value","login","textContent","axios","post","mail","pwd","res","defaults","headers","common","authorization","sessionStorage","setItem","data","nickname","setTimeout","innerHTML","show","reset","location","href","isnull","item","match","confirm_pwd","sign_btn","signup_alert_txt","signup_modal","signup_status_txt","myModal","format_isok","signup_check","signup","console","log","passsword","then","error","response","signUpEmail","trim","length"],"mappings":"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","file":"all.js","sourcesContent":["const apiUrl = 'https://todoo.5xcamp.us';\nconst allinput = document.querySelectorAll('input');\nconst email = document.querySelector('#Email1');\nconst password = document.querySelector('#Password1');\nconst login_btn = document.querySelector('.login_btn');\nconst alert_txt = document.querySelector('.alert_txt');\nconst status_txt = document.querySelector('.status_txt');\nconst modal = document.querySelector('#login_modal');\nconst loginModal = new bootstrap.Modal(modal, {})\n\nlogin_btn.addEventListener('click', () => {\n  const check_ok = check();\n  if(check_ok === true) {\n    input(email.value, password.value)\n  }else{\n    return;\n  }\n})\n\nfunction login(email, password) {\n  status_txt.textContent = '登入中請稍後 ...';\n  return axios.post(`${apiUrl}/users/sign_in`,\n    {\n      \"user\":{\n        \"email\": email,\n        \"password\": password\n      }\n    }\n  )\n}\n\n// const input = async(mail, pwd) => {\n//   try{\n//     const res = await login(mail, pwd);\n//     //設置默認標頭的機制語法，該標頭將隨您發出的每個請求一起發送\n//     axios.defaults.headers.common['Authorization'] = res.headers.Authorization\n//     sessionStorage.setItem('token', res.headers.Authorization)\n//     sessionStorage.setItem('name', res.data.nickname)\n//     setTimeout(() =>{\n//       status_txt.textContent = '';\n//       alert_txt.innerHTML = `登入成功 ! 歡迎${res.data.nickname} 回來 <br><br> 即將跳轉待辦清單...`;\n//       loginModal.show();\n//       reset();\n//       setTimeout(() =>{\n//         document.location.href='./addTodos.html';\n//       }, 2000);\n//     }, 1000);\n\n//   }catch(error){\n//     setTimeout(() =>{\n//       status_txt.textContent = '';\n//       alert_txt.textContent = '登入失敗，您的Email或密碼有誤!'\n//       loginModal.show()\n//       reset();\n//     }, 1000);\n//   }\n// }\n\nconst input = async (mail, pwd) => {\n  try {\n      const res = await login(mail, pwd);\n      axios.defaults.headers.common['Authorization'] = res.headers.authorization\n      sessionStorage.setItem('token', res.headers.authorization)\n      sessionStorage.setItem('name', res.data.nickname)\n      setTimeout(() => {\n          status_txt.textContent = '';\n          alert_txt.innerHTML = `登入成功 ! 歡迎 ${res.data.nickname} 回來 <br><br> 即將跳轉待辦清單 ...`;\n          loginModal.show()\n          reset();\n          setTimeout(() => {\n              document.location.href = './list.html';\n          }, 2000);\n      }, 1000);\n\n  } catch (error) {\n      setTimeout(() => {\n          status_txt.textContent = '';\n          alert_txt.textContent = '登入失敗，您的Email或密碼有誤 !  '\n          loginModal.show()\n          reset();\n      }, 1000);\n\n  }\n}\n\n\n\n\n\nfunction check(){\n  let isnull = false;\n  for(const item of allinput){\n    if(item.value === ''){\n      isnull = true;\n      break;\n    }\n  }\n  if (isnull === true){\n    alert_txt.textContent = '您還有欄位尚未填寫喔!!';\n    loginModal.show();\n    reset();\n    return;\n  }\n  //email的輸入值字串必須有 @\n  if(email.value.match('@') === null){\n    alert_txt.textContent = '您的Email格式不正確!!!';\n    loginModal.show();\n    reset();\n    return;\n  }\n  return true;\n}\n\nfunction reset(){\n  email.value = '';\n  password.value = '';\n}","const apiUrl = 'https://todoo.5xcamp.us';\nconst allinput = document.querySelectorAll('input');\nconst mail = document.querySelector('#Email1');\nconst nickname = document.querySelector('#nickname');\nconst password = document.querySelector('#Password1');\nconst confirm_pwd = document.querySelector('#signUpPassword2');\nconst sign_btn = document.querySelector('.signup_btn');\nconst signup_alert_txt = document.querySelector('.signup_alert_txt');\nconst signup_modal = document.querySelector('.signup_modal');\nconst signup_status_txt = document.querySelector('.signup_status_txt');\nconst myModal = new bootstrap.Modal(modal, {})\n\nreset();\n\nsign_btn.addEventListener('click', () => {\n  const format_isok = signup_check();\n  if (format_isok === true) {\n    signup(mail, nickname, password)\n  } else {\n    return\n  }\n  console.log(132);\n})\n\nfunction signup(email, nickname, passsword) {\n  status_txt.textContent = '註冊中請稍後 ... ';\n  axios.post(`${apiUrl}/users`, {\n    \"user\": {\n      \"email\": email.value,\n      \"nickname\": nickname.value,\n      \"password\": passsword.value\n    }\n  }\n  )\n    .then(res => {\n      setTimeout(() => {\n        alert_txt.innerHTML = `註冊成功 ! 歡迎${res.data.nickname}光臨本網站 <br><br> 頁面即將在3秒後跳轉至登入畫面 ...`;\n        myModal.show();\n        reset();\n        setTimeout(() => {\n          document.location.href = './index.html'\n        }, 20000)\n      }, 10000)\n    })\n    .catch(error => {\n      console.log(error.response);\n      setTimeout(() => {\n        alert_txt.innerHTML = `很抱歉 ! 您的${error.response.data.error[0]} 請重新註冊`;\n        myModal.show();\n        status_txt.textContent = '';\n        reset();\n      }, 1000);\n    })\n}\n\nfunction signup_check() {\n  let isnull = false;\n\n  for (const item of allinput) {\n    if (item.value === '') {\n      isnull = true;\n      break;\n    }\n  }\n  if (isnull === true) {\n    signup_alert_txt.textContent = '您還有欄位尚未填寫';\n    myModal.show();\n  }\n  if (signUpEmail.value.match('@') === null) {\n    signup_alert_txt.textContent = 'Email 格式不正確';\n    myModal.show();\n    reset();\n    return;\n  }\n  if (password.value.trim().length < 6) {\n    signup_alert_txt.textContent = '密碼必須6個字以上喔 ! ';\n    myModal.show();\n    password.value = '';\n    confirm_pwd.value = '';\n    return;\n  }\n  if (password.value !== confirm_pwd.value) {\n    signup_alert_txt.textContent = '兩次的密碼輸入不一致喔 ! ';\n    myModal.show();\n    password.value = '';\n    confirm_pwd.value = '';\n    return;\n  }\n  return true;\n}\n\nfunction reset() {\n  mail.value = '';\n  nickname.value = '';\n  password.value = '';\n  confirm_pwd.value = '';\n}"]}